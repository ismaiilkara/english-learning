<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Builder - English Learning Hub</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        [x-cloak] {
            display: none !important;
        }

        .word-chip {
            user-select: none;
            cursor: grab;
            transition: all 0.2s ease;
        }

        .word-chip:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        .word-chip.dragging {
            opacity: 0.5;
            transform: scale(1.1);
        }

        .drop-slot {
            min-width: 100px;
            min-height: 44px;
            border-bottom: 3px solid rgba(255, 255, 255, 0.3);
            transition: all 0.2s ease;
        }

        .drop-slot.drag-over {
            border-bottom-color: #ec4899;
            background: rgba(236, 72, 153, 0.1);
        }

        .drop-slot.filled {
            border-bottom-color: #22c55e;
        }

        .word-bank-chip {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .word-bank-chip:hover {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.3), rgba(139, 92, 246, 0.3));
            border-color: rgba(236, 72, 153, 0.5);
        }

        .placed-word {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            animation: placeWord 0.3s ease;
        }

        @keyframes placeWord {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .correct-answer {
            background: linear-gradient(135deg, #22c55e, #16a34a) !important;
            border-color: #22c55e !important;
        }

        .wrong-answer {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            border-color: #ef4444 !important;
        }

        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(236, 72, 153, 0.3);
            }

            50% {
                box-shadow: 0 0 40px rgba(236, 72, 153, 0.6);
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 min-h-screen">

    <div x-data="sentenceBuilderApp()" x-init="init()" x-cloak class="min-h-screen">

        <!-- Top Navigation -->
        <nav class="bg-black/40 backdrop-blur-xl border-b border-white/10 p-4">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <h1 class="text-2xl font-bold text-white flex items-center gap-2">
                    üéì <span class="bg-gradient-to-r from-pink-400 to-yellow-400 bg-clip-text text-transparent">English
                        Learning Hub</span>
                </h1>
                <div class="flex gap-4">
                    <a href="index.html"
                        class="px-6 py-2 rounded-full text-white font-semibold transition-all bg-white/10 hover:bg-white/20">
                        üìò Grammar
                    </a>
                    <a href="itu-prof.html"
                        class="px-6 py-2 rounded-full text-white font-semibold transition-all bg-white/10 hover:bg-white/20">
                        üéØ ITU PROF
                    </a>
                    <a href="vocabulary.html"
                        class="px-6 py-2 rounded-full text-white font-semibold transition-all bg-white/10 hover:bg-white/20">
                        üìö Vocabulary
                    </a>
                    <span class="px-6 py-2 rounded-full text-white font-semibold bg-pink-500">
                        üß© Sentence Builder
                    </span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-5xl mx-auto p-8">

            <!-- Header -->
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-white mb-2 flex items-center justify-center gap-4">
                    üß© <span>Sentence Builder</span>
                </h2>
                <p class="text-white/60 text-lg">Drag and drop words to form the correct sentence</p>
            </div>

            <!-- Difficulty Filter -->
            <div class="flex justify-center gap-4 mb-6">
                <button @click="filterDifficulty = 'all'; filterSentences()"
                    :class="filterDifficulty === 'all' ? 'bg-pink-500' : 'bg-white/10 hover:bg-white/20'"
                    class="px-6 py-2 rounded-full text-white font-semibold transition-all">
                    All
                </button>
                <button @click="filterDifficulty = 'medium'; filterSentences()"
                    :class="filterDifficulty === 'medium' ? 'bg-yellow-500' : 'bg-white/10 hover:bg-white/20'"
                    class="px-6 py-2 rounded-full text-white font-semibold transition-all">
                    üü° Medium
                </button>
                <button @click="filterDifficulty = 'hard'; filterSentences()"
                    :class="filterDifficulty === 'hard' ? 'bg-red-500' : 'bg-white/10 hover:bg-white/20'"
                    class="px-6 py-2 rounded-full text-white font-semibold transition-all">
                    üî¥ Hard
                </button>
            </div>

            <!-- Progress Bar -->
            <div class="bg-white/10 rounded-full h-3 overflow-hidden mb-2">
                <div class="bg-gradient-to-r from-pink-500 to-yellow-500 h-full transition-all duration-500"
                    :style="`width: ${(currentIndex + 1) / filteredSentences.length * 100}%`">
                </div>
            </div>
            <p class="text-white/60 text-sm text-center mb-8">
                Sentence <span x-text="currentIndex + 1"></span> of <span x-text="filteredSentences.length"></span>
                <span class="ml-2 px-2 py-1 rounded-full text-xs"
                    :class="currentSentence?.difficulty === 'hard' ? 'bg-red-500/30 text-red-300' : 'bg-yellow-500/30 text-yellow-300'"
                    x-text="currentSentence?.difficulty === 'hard' ? 'üî¥ Hard' : 'üü° Medium'">
                </span>
                <span class="ml-4 text-pink-400">Score: <span x-text="score"></span></span>
            </p>

            <!-- Navigation Buttons -->
            <div x-show="!showResults" class="flex justify-between items-center mb-4">
                <button @click="goToPrevious()" :disabled="currentIndex === 0"
                    :class="currentIndex === 0 ? 'bg-white/5 text-white/30 cursor-not-allowed' : 'bg-white/10 hover:bg-white/20 text-white'"
                    class="font-semibold py-2 px-6 rounded-full transition-all flex items-center gap-2">
                    ‚Üê Previous
                </button>
                <span class="text-white/60 text-sm">
                    <span x-text="currentIndex + 1"></span> / <span x-text="filteredSentences.length"></span>
                </span>
                <button @click="goToNext()" :disabled="currentIndex === filteredSentences.length - 1"
                    :class="currentIndex === filteredSentences.length - 1 ? 'bg-white/5 text-white/30 cursor-not-allowed' : 'bg-white/10 hover:bg-white/20 text-white'"
                    class="font-semibold py-2 px-6 rounded-full transition-all flex items-center gap-2">
                    Next ‚Üí
                </button>
            </div>

            <!-- Question Card -->
            <div x-show="!showResults" class="bg-black/30 backdrop-blur-xl rounded-2xl p-8 border border-white/10">

                <!-- Question Text -->
                <div class="mb-8 text-center">
                    <p class="text-white/60 text-sm mb-2">Form the correct sentence:</p>
                    <p class="text-2xl text-white font-medium" x-text="currentSentence?.question"></p>
                </div>

                <!-- Drop Zone - Sentence Building Area -->
                <div class="bg-black/20 rounded-xl p-6 mb-8 border-2 border-dashed border-white/20">
                    <div class="flex flex-wrap gap-3 min-h-[60px] justify-center items-center">
                        <template x-for="(slot, index) in slots" :key="index">
                            <div class="flex items-center gap-1">
                                <div @dragover.prevent="handleDragOver($event, index)"
                                    @dragleave.prevent="handleDragLeave($event, index)"
                                    @drop.prevent="handleDrop($event, index)" @click="removeFromSlot(index)" :class="{
                                        'drag-over': dragOverSlot === index,
                                        'filled': slot !== null
                                    }"
                                    class="drop-slot px-4 py-2 rounded-lg flex items-center justify-center text-white font-medium cursor-pointer">
                                    <span x-show="slot !== null"
                                        class="placed-word px-4 py-2 rounded-lg text-white font-medium" x-text="slot">
                                    </span>
                                    <span x-show="slot === null" class="text-white/30">___</span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Word Bank -->
                <div class="mb-8">
                    <p class="text-white/60 text-sm mb-4 text-center">Available words (drag or click to place):</p>
                    <div class="flex flex-wrap gap-3 justify-center">
                        <template x-for="(word, index) in availableWords" :key="index">
                            <div :id="'word-' + index" draggable="true"
                                @dragstart="handleDragStart($event, word, index)" @dragend="handleDragEnd($event)"
                                @click="placeWord(word, index)"
                                class="word-chip word-bank-chip px-5 py-3 rounded-xl text-white font-medium text-lg hover:scale-105">
                                <span x-text="word"></span>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex justify-center gap-4">
                    <button @click="checkAnswer()" :disabled="!allSlotsFilled()"
                        :class="allSlotsFilled() ? 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 pulse-glow' : 'bg-white/10 cursor-not-allowed'"
                        class="text-white font-bold py-3 px-8 rounded-full transition-all">
                        Check Answer ‚úì
                    </button>
                    <button @click="resetCurrentSentence()"
                        class="bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-8 rounded-full transition-all">
                        Reset üîÑ
                    </button>
                </div>

                <!-- Feedback -->
                <div x-show="showFeedback" x-transition class="mt-6">
                    <div :class="isCorrect ? 'bg-green-500/20 border-green-500' : 'bg-red-500/20 border-red-500'"
                        class="p-4 rounded-xl border text-white text-center">
                        <span x-show="isCorrect">‚úÖ Correct! Great job!</span>
                        <div x-show="!isCorrect">
                            <span>‚ùå Not quite.</span>
                            <p class="mt-2 text-sm text-white/80">Correct answer: <span
                                    class="text-green-400 font-medium"
                                    x-text="currentSentence?.answer.join(' ')"></span></p>
                        </div>
                    </div>

                    <button @click="nextSentence()"
                        class="mt-4 w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-full transition-all">
                        <span
                            x-text="currentIndex < filteredSentences.length - 1 ? 'Next Sentence ‚Üí' : 'See Results ‚úì'"></span>
                    </button>
                </div>
            </div>

            <!-- Results Card -->
            <div x-show="showResults" x-transition
                class="bg-gradient-to-r from-pink-500/20 to-purple-500/20 backdrop-blur-xl rounded-2xl p-8 border border-pink-500/30 text-center">
                <div class="text-6xl mb-4">üéâ</div>
                <h3 class="text-3xl font-bold text-white mb-2">Congratulations!</h3>
                <p class="text-xl text-white/80">
                    Your Score: <span class="text-pink-400 font-bold" x-text="score"></span> / <span
                        x-text="filteredSentences.length"></span>
                </p>
                <p class="text-lg text-white/60 mt-2" x-text="getScoreMessage()"></p>
                <button @click="restart()"
                    class="mt-6 bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-8 rounded-full transition-all">
                    Try Again üîÑ
                </button>
            </div>

        </main>
    </div>

    <script>
        function sentenceBuilderApp() {
            return {
                sentences: [
                    // 25 Sentences - Mixed Grammar Topics
                    // Conditionals & Hypotheticals
                    {
                        question: "A: Why didn't you call me when you arrived?",
                        answer: ["I", "would", "have", "called", "you", "if", "my", "phone", "hadn't", "died."],
                        shuffled: ["would", "I", "died.", "called", "have", "hadn't", "you", "phone", "if", "my"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Do you think she will accept the job offer?",
                        answer: ["She", "might", "turn", "it", "down", "unless", "they", "offer", "more", "money."],
                        shuffled: ["might", "She", "money.", "turn", "down", "unless", "it", "offer", "they", "more"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: What would you do if you won the lottery?",
                        answer: ["I", "would", "probably", "quit", "my", "job", "and", "travel", "the", "world."],
                        shuffled: ["would", "I", "world.", "probably", "job", "quit", "and", "my", "travel", "the"],
                        difficulty: "medium"
                    },
                    // Passive Voice
                    {
                        question: "A: Who built this ancient temple?",
                        answer: ["It", "is", "believed", "to", "have", "been", "constructed", "by", "the", "Romans."],
                        shuffled: ["is", "It", "Romans.", "believed", "have", "to", "constructed", "been", "the", "by"],
                        difficulty: "hard"
                    },
                    {
                        question: "A: Did they fix your car yesterday?",
                        answer: ["My", "car", "is", "still", "being", "repaired", "at", "the", "garage."],
                        shuffled: ["car", "My", "garage.", "is", "being", "still", "at", "repaired", "the"],
                        difficulty: "medium"
                    },
                    // Reported Speech
                    {
                        question: "A: What did the doctor say about your condition?",
                        answer: ["He", "advised", "me", "to", "get", "more", "rest", "and", "drink", "plenty", "of", "water."],
                        shuffled: ["advised", "He", "water.", "me", "get", "to", "rest", "more", "drink", "and", "of", "plenty"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Did Mark tell you about the meeting?",
                        answer: ["He", "mentioned", "that", "it", "had", "been", "postponed", "until", "next", "week."],
                        shuffled: ["mentioned", "He", "week.", "that", "had", "it", "postponed", "been", "next", "until"],
                        difficulty: "medium"
                    },
                    // Wish & Regret
                    {
                        question: "A: Do you regret not learning to play the piano?",
                        answer: ["I", "wish", "I", "had", "taken", "lessons", "when", "I", "was", "younger."],
                        shuffled: ["wish", "I", "younger.", "I", "taken", "had", "when", "lessons", "was", "I"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Is the noise from the construction bothering you?",
                        answer: ["If", "only", "they", "would", "stop", "making", "so", "much", "noise."],
                        shuffled: ["only", "If", "noise.", "they", "stop", "would", "so", "making", "much"],
                        difficulty: "medium"
                    },
                    // Modals of Deduction
                    {
                        question: "A: I can't find my keys anywhere!",
                        answer: ["You", "must", "have", "left", "them", "at", "the", "office", "by", "mistake."],
                        shuffled: ["must", "You", "mistake.", "have", "them", "left", "the", "at", "by", "office"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Why is Sarah not answering her phone?",
                        answer: ["She", "could", "be", "in", "a", "meeting", "or", "her", "phone", "might", "be", "on", "silent."],
                        shuffled: ["could", "She", "silent.", "be", "a", "in", "or", "meeting", "might", "her", "on", "be", "phone"],
                        difficulty: "hard"
                    },
                    // Relative Clauses
                    {
                        question: "A: Tell me about your new colleague.",
                        answer: ["She", "is", "someone", "whose", "dedication", "and", "work", "ethic", "I", "really", "admire."],
                        shuffled: ["is", "She", "admire.", "someone", "dedication", "whose", "work", "and", "I", "ethic", "really"],
                        difficulty: "hard"
                    },
                    {
                        question: "A: Which restaurant did you go to last night?",
                        answer: ["We", "went", "to", "the", "one", "that", "had", "just", "opened", "downtown."],
                        shuffled: ["went", "We", "downtown.", "to", "one", "the", "had", "that", "opened", "just"],
                        difficulty: "medium"
                    },
                    // Comparatives & Superlatives
                    {
                        question: "A: How does the new software compare to the old one?",
                        answer: ["The", "new", "version", "is", "far", "more", "efficient", "than", "the", "previous", "one."],
                        shuffled: ["new", "The", "one.", "version", "far", "is", "efficient", "more", "previous", "than", "the"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Is this the best hotel in the city?",
                        answer: ["It", "is", "considered", "to", "be", "one", "of", "the", "finest", "in", "the", "area."],
                        shuffled: ["is", "It", "area.", "considered", "be", "to", "of", "one", "finest", "the", "in", "the"],
                        difficulty: "hard"
                    },
                    // Causative
                    {
                        question: "A: Did you paint your house yourself?",
                        answer: ["No,", "I", "had", "it", "painted", "by", "a", "professional", "last", "month."],
                        shuffled: ["I", "No,", "month.", "had", "painted", "it", "a", "by", "last", "professional"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Are you going to fix the computer yourself?",
                        answer: ["I", "will", "get", "a", "technician", "to", "look", "at", "it", "tomorrow."],
                        shuffled: ["will", "I", "tomorrow.", "get", "technician", "a", "look", "to", "it", "at"],
                        difficulty: "medium"
                    },
                    // Perfect Tenses
                    {
                        question: "A: How long have you been studying English?",
                        answer: ["I", "have", "been", "learning", "English", "for", "almost", "five", "years", "now."],
                        shuffled: ["have", "I", "now.", "been", "English", "learning", "almost", "for", "years", "five"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Will the project be finished by Friday?",
                        answer: ["By", "then,", "we", "will", "have", "completed", "all", "the", "major", "tasks."],
                        shuffled: ["then,", "By", "tasks.", "we", "have", "will", "all", "completed", "major", "the"],
                        difficulty: "hard"
                    },
                    // Emphasis & Cleft Sentences
                    {
                        question: "A: I think John broke the window.",
                        answer: ["It", "was", "actually", "Mike", "who", "broke", "the", "window,", "not", "John."],
                        shuffled: ["was", "It", "John.", "actually", "who", "Mike", "the", "broke", "not", "window,"],
                        difficulty: "hard"
                    },
                    {
                        question: "A: Did you enjoy the food at the party?",
                        answer: ["What", "I", "really", "enjoyed", "was", "the", "company,", "not", "the", "food."],
                        shuffled: ["I", "What", "food.", "really", "was", "enjoyed", "company,", "the", "the", "not"],
                        difficulty: "hard"
                    },
                    // Mixed Structures
                    {
                        question: "A: Should I apply for that job in London?",
                        answer: ["You", "had", "better", "think", "it", "through", "before", "making", "a", "decision."],
                        shuffled: ["had", "You", "decision.", "better", "it", "think", "before", "through", "a", "making"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Did the teacher let you leave early?",
                        answer: ["She", "allowed", "us", "to", "go", "home", "after", "finishing", "the", "test."],
                        shuffled: ["allowed", "She", "test.", "us", "go", "to", "after", "home", "the", "finishing"],
                        difficulty: "medium"
                    },
                    {
                        question: "A: Why did you lie to your parents?",
                        answer: ["I", "had", "no", "choice", "but", "to", "tell", "them", "the", "truth", "eventually."],
                        shuffled: ["had", "I", "eventually.", "no", "but", "choice", "tell", "to", "truth", "them", "the"],
                        difficulty: "hard"
                    },
                    {
                        question: "A: Are you sure you can handle this project alone?",
                        answer: ["I", "am", "confident", "that", "I", "can", "manage", "it", "without", "any", "help."],
                        shuffled: ["am", "I", "help.", "confident", "I", "that", "manage", "can", "without", "it", "any"],
                        difficulty: "medium"
                    }
                ],
                filteredSentences: [],
                filterDifficulty: 'all',
                currentIndex: 0,
                slots: [],
                availableWords: [],
                draggedWord: null,
                draggedIndex: null,
                dragOverSlot: null,
                showFeedback: false,
                isCorrect: false,
                score: 0,
                showResults: false,

                init() {
                    this.filterSentences();
                },

                filterSentences() {
                    if (this.filterDifficulty === 'all') {
                        this.filteredSentences = [...this.sentences];
                    } else {
                        this.filteredSentences = this.sentences.filter(s => s.difficulty === this.filterDifficulty);
                    }
                    this.restart();
                },

                get currentSentence() {
                    return this.filteredSentences[this.currentIndex];
                },

                setupCurrentSentence() {
                    if (!this.currentSentence) return;
                    const answerLength = this.currentSentence.answer.length;
                    this.slots = Array(answerLength).fill(null);
                    this.availableWords = [...this.currentSentence.shuffled];
                    this.showFeedback = false;
                },

                handleDragStart(event, word, index) {
                    this.draggedWord = word;
                    this.draggedIndex = index;
                    event.target.classList.add('dragging');
                    event.dataTransfer.effectAllowed = 'move';
                },

                handleDragEnd(event) {
                    event.target.classList.remove('dragging');
                    this.draggedWord = null;
                    this.draggedIndex = null;
                    this.dragOverSlot = null;
                },

                handleDragOver(event, slotIndex) {
                    if (this.slots[slotIndex] === null) {
                        this.dragOverSlot = slotIndex;
                    }
                },

                handleDragLeave(event, slotIndex) {
                    if (this.dragOverSlot === slotIndex) {
                        this.dragOverSlot = null;
                    }
                },

                handleDrop(event, slotIndex) {
                    if (this.slots[slotIndex] === null && this.draggedWord) {
                        this.slots[slotIndex] = this.draggedWord;
                        this.availableWords.splice(this.draggedIndex, 1);
                    }
                    this.dragOverSlot = null;
                },

                placeWord(word, index) {
                    // Find first empty slot
                    const emptySlotIndex = this.slots.findIndex(s => s === null);
                    if (emptySlotIndex !== -1) {
                        this.slots[emptySlotIndex] = word;
                        this.availableWords.splice(index, 1);
                    }
                },

                removeFromSlot(slotIndex) {
                    if (this.slots[slotIndex] !== null && !this.showFeedback) {
                        this.availableWords.push(this.slots[slotIndex]);
                        this.slots[slotIndex] = null;
                    }
                },

                allSlotsFilled() {
                    return this.slots.every(s => s !== null);
                },

                checkAnswer() {
                    if (!this.allSlotsFilled()) return;

                    const userAnswer = this.slots.join(' ');
                    const correctAnswer = this.currentSentence.answer.join(' ');

                    this.isCorrect = userAnswer === correctAnswer;
                    if (this.isCorrect) this.score++;
                    this.showFeedback = true;
                },

                nextSentence() {
                    if (this.currentIndex < this.filteredSentences.length - 1) {
                        this.currentIndex++;
                        this.setupCurrentSentence();
                    } else {
                        this.showResults = true;
                    }
                },

                resetCurrentSentence() {
                    this.setupCurrentSentence();
                },

                goToPrevious() {
                    if (this.currentIndex > 0) {
                        this.currentIndex--;
                        this.setupCurrentSentence();
                    }
                },

                goToNext() {
                    if (this.currentIndex < this.filteredSentences.length - 1) {
                        this.currentIndex++;
                        this.setupCurrentSentence();
                    }
                },

                restart() {
                    this.currentIndex = 0;
                    this.score = 0;
                    this.showResults = false;
                    this.showFeedback = false;
                    this.setupCurrentSentence();
                },

                getScoreMessage() {
                    const percentage = (this.score / this.filteredSentences.length) * 100;
                    if (percentage === 100) return "Perfect! You're a master! üèÜ";
                    if (percentage >= 80) return "Excellent work! Keep it up! üåü";
                    if (percentage >= 60) return "Good job! Room for improvement! üí™";
                    if (percentage >= 40) return "Keep practicing! You'll get there! üìö";
                    return "Don't give up! Practice makes perfect! üéØ";
                }
            }
        }
    </script>

</body>

</html>